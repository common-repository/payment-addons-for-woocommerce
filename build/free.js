(()=>{"use strict";const e=window.wc.wcBlocksRegistry,t=window.React,n=window.wp.i18n,a=window.wp.element,r=({config:e})=>{if(!e.test_mode)return null;const a=(0,n.sprintf)((0,n.__)('In test mode, you can use the card number 4242424242424242 with any CVC and a valid expiration date or check the <a href="%s" target="_blank">Testing Stripe documentation</a> for more card numbers.',"woo-pay-addons"),"https://stripe.com/docs/testing");return(0,t.createElement)("div",{className:"wspa_warning"},(0,t.createElement)("div",{dangerouslySetInnerHTML:{__html:a}}))};var s;function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}var c=function(e){return t.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 40"},e),s||(s=t.createElement("path",{fillRule:"evenodd",d:"M0 8a4 4 0 0 1 4-4h30a4 4 0 0 1 4 4v8a1 1 0 1 1-2 0v-4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h30a2 2 0 0 0 2-2v-6a1 1 0 1 1 2 0v6a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4zm4 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0m29.992 9.409L44.583 20H29a1 1 0 1 0 0 2h15.583l-3.591 3.591a1 1 0 1 0 1.415 1.416l5.3-5.3a1 1 0 0 0 0-1.414l-5.3-5.3a1 1 0 1 0-1.415 1.416",clipRule:"evenodd",opacity:.6})))};const i=window.wc.wcSettings,l="wspa_checkout_redirect",m=(e="wspa_checkout_form")=>{const t=(0,i.getSetting)(`${e}_data`,null);if(!t)throw new Error("Stripe initialization data is not available");return t},d=({shouldSavePayment:e,emitResponse:n,eventRegistration:{onCheckoutFail:s,onPaymentProcessing:o}})=>{const i=m(l);return(0,a.useEffect)((()=>{const t=o((async()=>{const t=e||i?.cartContainsSubscription;return{type:n.responseTypes.SUCCESS,meta:{paymentMethodData:{save_payment_method:t?"yes":"no"}}}}));return()=>{t()}}),[n.responseTypes.ERROR,n.responseTypes.SUCCESS,o,e]),(0,a.useEffect)((()=>s((({processingResponse:{paymentDetails:e}})=>({type:"failure",message:e.errorMessage,messageContext:n.noticeContexts.PAYMENTS})))),[s,n.noticeContexts.PAYMENTS]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wspa-checkout-redirect"},(0,t.createElement)(c,null),(0,t.createElement)("span",null,i?.description)),(0,t.createElement)(r,{config:i}))};var p,u,w;const h=m(l),v={name:l,label:(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",{className:"wspa-checkout-redirect-method"},(0,t.createElement)("span",{className:"wspa-checkout-redirect-method-label"},h?.title),(0,t.createElement)("img",{className:"wspa-checkout-redirect-method-icon",src:h?.icon.src}))),content:(0,t.createElement)(d,null),edit:(0,t.createElement)(d,null),canMakePayment:()=>!0,ariaLabel:(0,n.__)("Stripe checkout redirect payment method","woo-pay-addons"),supports:{showSavedCards:null!==(p=h?.showSavedCards)&&void 0!==p&&p,showSaveOption:null!==(u=h?.showSaveOption)&&void 0!==u&&u,features:null!==(w=h?.supports)&&void 0!==w?w:[]}};(0,e.registerPaymentMethod)(v)})();